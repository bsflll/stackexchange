{
  "title": "Decompiling .pyc file to 0 byte .py file",
  "link": "https://reverseengineering.stackexchange.com/questions/24835/decompiling-pyc-file-to-0-byte-py-file",
  "content": "i am doing the CTF-like challenges. One of these tasks need us to decompiling Python bytecode 3.8 (.pyc file) into py file. However, the py file that generated by pyc file is 0 byte\nThe original file's name is flag.py Here are my procedures.\n\n```\n uncompyle6 version 3.6.6\n Python bytecode 3.8 (3413)\n Decompiled from: Python 3.8.0 \n [GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)]\n Embedded file name: flag.o.py\n Compiled at: 2020-04-24 16:09:51\n Size of source mod 2**32: 2476187 bytes\n\n```\nMy environment is MacOS, Python 3.8.0. \n\nThe .pyc file is small and I've already checked the magic number of the file's header, it is Python 3.8.0.\nThe unusual thing of this pyc file is that there are several thousands of ff 00 at the end of the file. \n\n```\n55 0d 0d 0a 00 00 00 00\n...\nff 00 ff 00 ff 00 ff 00 \n...\nff 00 ff 00 ff 00 ff 00 \nb9 01 0c 06 0a 01 08 01\n\n\n```\nAny Suggestions?\n\n",
  "votes": "3",
  "answers": 1,
  "views": "5k",
  "tags": [
    "python",
    "decompile"
  ],
  "user": "FRANKfisher",
  "time": "Apr 26, 2020 at 13:58",
  "comments": [],
  "answers_data": [
    {
      "content": "It's possible that the pyc file is obfuscated/malformed in a way that it trips uncompyle6. Rather than decompiling you can try disassembling the file instead.\n\nThe dis module can disassemble Python bytecode. You can use it as follows.\n\n```\nimport marshal, dis\n\nf = open(\"flag.pyc\", \"rb\")\nf.seek(16) # Skip 16 byte header (for Python 3.8)\nco = marshal.load(f)\nprint(dis.dis(co))\n\n```\nThere also exists other Python disassemblers libraries like xdis. After installing the package (pip install xdis) you can simply run pydisasm flag.pyc to disassemble the pyc.\n\nOnce you have figured out the reason it trips uncompyle6, you can remove those parts and re-assemble a corrected pyc using xasm which can then be decompiled.\n\n",
      "votes": "3",
      "user": "0xec",
      "time": "Apr 26, 2020 at 17:24",
      "is_accepted": true,
      "comments": [
        {
          "user": "FRANKfisher",
          "text": "Hi, @0xec.Thanks for your answer! I have disassembled the .pyc file. However, i am not sure how to figure out the reason. Could you give me a hint? Thank you so much!",
          "time": null
        },
        {
          "user": "0xec",
          "text": "@FRANKfisher Please add the disassembled code or the pyc file to the question. Without that it's difficult to answer.",
          "time": null
        }
      ]
    }
  ]
}