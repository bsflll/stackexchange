{
    "title": "SIGBUS when trying to trace functions?",
    "link": "https://reverseengineering.stackexchange.com/questions/20850/sigbus-when-trying-to-trace-functions",
    "content": "I am working on a crackme (Mach-O, mac app).\nNow, the app itself is weird and I honestly don't really know where to start. There are multiple threads and the main function doesn't really tell me where the serial verification is located.\nInstead of going through main, I went through <pre><code>_objc_msgSend</code></pre> and found some interesting functions that print the usual 'you win/you lose'.\nIf I check the reference of those, I end up here:\n<pre><code>; Segment type: Pure data\n000062F4 __inst_meth segment dword public 'DATA' use32\n000062F4 assume cs:__inst_meth\n000062F4 ;org 62F4h\n000062F4 stru_62F4 __objc_method_list <0, 0Eh>   ; DATA XREF: __class:stru_60C4â†‘o\n000062FC __objc_method <offset sel_dealloc, offset aV804, \\ ; -[MCAppDelegate dealloc] ...\n000062FC                offset __MCAppDelegate_dealloc_>\n00006308 __objc_method <offset sel_succeed, offset aV804, \\ ; -[MCAppDelegate succeed] ...\n00006308                offset __MCAppDelegate_succeed_>\n00006314 __objc_method <offset sel_crackDetected, offset aV804, \\ ; -[MCAppDelegate crackDetected] ...\n00006314                offset __MCAppDelegate_crackDetected_>\n00006320 __objc_method <offset sel_fail, offset aV804, \\ ; -[MCAppDelegate fail] ...\n00006320                offset __MCAppDelegate_fail_>\n0000632C __objc_method <offset sel_a, offset aV804, offset __MCAppDelegate_a_> ; -[MCAppDelegate a] ...\n00006338 __objc_method <offset sel_b, offset aV804, offset __MCAppDelegate_b_> ; -[MCAppDelegate b] ...\n00006344 __objc_method <offset sel_c, offset aV804, offset __MCAppDelegate_c_> ; -[MCAppDelegate c] ...\n00006350 __objc_method <offset sel_d, offset aV804, offset __MCAppDelegate_d_> ; -[MCAppDelegate d] ...\n0000635C __objc_method <offset sel_e, offset aV804, offset __MCAppDelegate_e_> ; -[MCAppDelegate e] ...\n00006368 __objc_method <offset sel_f, offset aV804, offset __MCAppDelegate_f_> ; -[MCAppDelegate f] ...\n00006374 __objc_method <offset sel_mk, offset aV804, \\ ; -[MCAppDelegate mk] ...\n00006374                offset __MCAppDelegate_mk_>\n00006380 __objc_method <offset sel_applicationDidFinishLaunching_, \\ ; -[MCAppDelegate applicationDidFinishLaunching:] ...\n00006380                offset aV12048, \\\n00006380                offset __MCAppDelegate_applicationDidFinishLaunching__>\n0000638C __objc_method <offset sel_window, offset a804_0, \\ ; -[MCAppDelegate window] ...\n0000638C                offset __MCAppDelegate_window_>\n00006398 __objc_method <offset sel_setWindow_, offset aV12048, \\ ; -[MCAppDelegate setWindow:] ...\n00006398                offset __MCAppDelegate_setWindow__>\n00006398 __inst_meth ends\n</code></pre>\nNow, unfortunately this doesn't lead me anywhere. I checked the references and found nothing. \nAfter this failed attempt, I tried to trace functions via IDA with the local MacOS debugger.\nFirst thing first, it throws this error just after starting the process:\n\nUnexpected dyld_opcode in the debugger server (init_dyld): 5ffb\n\nI found absolutely no info about this, so I just ignored it.\nThen I started the function tracing and got this:\n\ngot SIGBUS signal (bus error) (exc.code a, tid 24571)\n\nNow, keep in mind that this is my first 'real' crackme. Everything that I did before was just a command line application, so it was much more straightforward than this.\nI am not even sure if 'function tracing' is what I think it is. I was hoping for some kind of function call hierarchy where I could find what exactly called the 'fail' function.\n",
    "votes": "1",
    "answers": 0,
    "views": "169",
    "tags": [
        "ida",
        "assembly"
    ],
    "user": "G. Ramistella",
    "time": "Mar 11, 2019 at 22:15",
    "comments": [],
    "answers_data": []
}