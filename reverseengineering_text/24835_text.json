{
    "title": "Decompiling .pyc file to 0 byte .py file",
    "link": "https://reverseengineering.stackexchange.com/questions/24835/decompiling-pyc-file-to-0-byte-py-file",
    "content": "i am doing the CTF-like challenges. One of these tasks need us to decompiling Python bytecode 3.8 (.pyc file) into py file. However, the py file that generated by pyc file is 0 byte\nThe original file's name is <pre><code>flag.py</code></pre> Here are my procedures.\n\nRename the file: <pre><code>flag.py</code></pre> -> <pre><code>flag.pyc</code></pre>\nUse <pre><code>uncompyle6</code></pre>tool and type command: <pre><code>uncompyle6 flag.pyc > flag.py</code></pre> \nIt will generate <pre><code>flag.py</code></pre> file, however it is 0 byte. And after several hours, it is still 0 byte.\nIf i interrupt the command line tool by keyboard, the <pre><code>flag.py</code></pre> file will have the comment:\n\n<pre><code> uncompyle6 version 3.6.6\n Python bytecode 3.8 (3413)\n Decompiled from: Python 3.8.0 \n [GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)]\n Embedded file name: flag.o.py\n Compiled at: 2020-04-24 16:09:51\n Size of source mod 2**32: 2476187 bytes\n</code></pre>\nMy environment is MacOS, Python 3.8.0. \nThe .pyc file is small and I've already checked the magic number of the file's header, it is Python 3.8.0.\nThe unusual thing of this pyc file is that there are several thousands of <pre><code>ff 00</code></pre> at the end of the file. \n<pre><code>55 0d 0d 0a 00 00 00 00\n...\nff 00 ff 00 ff 00 ff 00 \n...\nff 00 ff 00 ff 00 ff 00 \nb9 01 0c 06 0a 01 08 01\n\n</code></pre>\nAny Suggestions?\n",
    "votes": "3",
    "answers": 1,
    "views": "5k",
    "tags": [
        "python",
        "decompile"
    ],
    "user": "FRANKfisher",
    "time": "Apr 26, 2020 at 13:58",
    "comments": [],
    "answers_data": [
        {
            "content": "It's possible that the pyc file is obfuscated/malformed in a way that it trips uncompyle6. Rather than decompiling you can try disassembling the file instead.\nThe <pre><code>dis</code></pre> module can disassemble Python bytecode. You can use it as follows.\n<pre><code>import marshal, dis\n\nf = open(\"flag.pyc\", \"rb\")\nf.seek(16) # Skip 16 byte header (for Python 3.8)\nco = marshal.load(f)\nprint(dis.dis(co))\n</code></pre>\nThere also exists other Python disassemblers libraries like <pre><code>xdis</code></pre>. After installing the package (<pre><code>pip install xdis</code></pre>) you can simply run <pre><code>pydisasm flag.pyc</code></pre> to disassemble the pyc.\nOnce you have figured out the reason it trips uncompyle6, you can remove those parts and re-assemble a corrected pyc using xasm which can then be decompiled.\n",
            "votes": "3",
            "user": "0xec",
            "time": "Apr 26, 2020 at 17:24",
            "is_accepted": true,
            "comments": [
                {
                    "user": "FRANKfisher",
                    "text": "<span class=\"comment-copy\">Hi, @0xec.Thanks for your answer! I have disassembled the .pyc file. However, i am not sure how to figure out the reason. Could you give me a hint? Thank you so much!</span>",
                    "time": null
                },
                {
                    "user": "0xec",
                    "text": "<span class=\"comment-copy\">@FRANKfisher Please add the disassembled code or the pyc file to the question. Without that it's difficult to answer.</span>",
                    "time": null
                }
            ]
        }
    ]
}