{
    "title": "I need help reverse engineering my ereader (trying to get into the shell)",
    "link": "https://reverseengineering.stackexchange.com/questions/25139/i-need-help-reverse-engineering-my-ereader-trying-to-get-into-the-shell",
    "content": "I'm trying to reverse engineer my E-Reader. It's a Denver EBO-620. I want to change the off screen image and add my own fonts. With help of Reddit I've managed to log the startup sequence (shown down here), but I'm not sure what my next steps should be.\nAny help is greatly appreciated!\n<pre><code>    =~=~=~=~=~=~=~=~=~=~=~= PuTTY log 2020.05.27 18:56:10 =~=~=~=~=~=~=~=~=~=~=~=\n   Âÿ ÿHELLO! BOOT0 is starting!\ninitializing SDRAM OK.\nNAND_RequestDMA  ok\nSucceed in opening nand flash.\nSucceed in reading Boot1 file head.\nThe size of Boot1 is 0x00034000.\nThe file stored in 0X00000000 of block 2 is perfect.\nCheck is correct.\nReady to disable icache.\nSucceed in loading Boot1.\nJump to Boot1.\nbegin to init file system\nbat vol = 4046\n1\nNB1 : enter NFB_Init\n\nnand_for_boot1.c 135get the good blk ratio from hwscan : 631571392 \n\nNB1 : enter phy init\n\n[NAND] nand driver version: 0x0x00000002, 0x0x00000011, data: 0x20120926\n\nNAND_RequestDMA  ok\n\n[SCAN_DBG] Nand flash chip id is:0x0x0000002c 0x0x00000044 0x0x00000044 0x0x00000000 0x0x8042506c 0x0x0000004b\n\n\n\n\n\n[SCAN_DBG] ==============Nand Architecture Parameter==============\n\n[SCAN_DBG]    Nand Chip ID:         0x0x4b44442c 0x0xffffffff\n\n[SCAN_DBG]    Nand Chip Count:      0x0x00000001\n\n[SCAN_DBG]    Nand Chip Connect:    0x0x00000001\n\n[SCAN_DBG]    Nand Rb Connect Mode:      0x0x00000001\n\n[SCAN_DBG]    Sector Count Of Page: 0x0x00000010\n\n[SCAN_DBG]    Page Count Of Block:  0x0x00000100\n\n[SCAN_DBG]    Block Count Of Die:   0x0x00000800\n\n[SCAN_DBG]    Plane Count Of Die:   0x0x00000002\n\n[SCAN_DBG]    Die Count Of Chip:    0x0x00000001\n\n[SCAN_DBG]    Bank Count Of Chip:   0x0x00000001\n\n[SCAN_DBG]    Optional Operation:   0x0x00000008\n\n[SCAN_DBG]    Access Frequence:     0x0x00000028\n\n[SCAN_DBG]    ECC Mode:             0x0x00000005\n\n[SCAN_DBG]    Read Retry Type:      0x0x00000000\n\n[SCAN_DBG]    DDR Type:             0x0x00000000\n\n[SCAN_DBG] =======================================================\n\n\n\n[SCAN_DBG] ==============Optional Operaion Parameter==============\n\n[SCAN_DBG]    MultiPlaneReadCmd:      0x0x00000000, 0x0x00000030\n\n[SCAN_DBG]    MultiPlaneWriteCmd:     0x0x00000011, 0x0x00000080\n\n[SCAN_DBG]    MultiPlaneCopyReadCmd:  0x0x00000000, 0x0x00000000, 0x0x00000035\n\n[SCAN_DBG]    MultiPlaneCopyWriteCmd: 0x0x00000085, 0x0x00000011, 0x0x00000080\n\n[SCAN_DBG]    MultiPlaneStatusCmd:    0x0x00000070\n\n[SCAN_DBG]    InterBnk0StatusCmd:     0x0x00000078\n\n[SCAN_DBG]    InterBnk1StatusCmd:     0x0x00000078\n\n[SCAN_DBG]    BadBlockFlagPosition:   0x0x00000001\n\n[SCAN_DBG]    MultiPlaneBlockOffset:  0x0x00000001\n\n[SCAN_DBG] =======================================================\n\nNB1 : nand phy init ok\n\nsrc\\format\nand_format.c 2623[FORMAT_ERR] format nand flash*********!\n\nPHY_PageReadSpare : too much ecc err,bank 0x00000000 block 0x00000000,page 0x00000001 \n\nPHY_PageReadSpare : too much ecc err,bank 0x00000000 block 0x00000000,page 0x00000000 \n\nNB1 : init ok\n\nmount successfully.\n0\nSource clock is HOSC, preScale=64, interval=375\n\n Mount Parts Thread runniMInit : enter init nand flash driver\n nand driver version: 0x2 0x11\n nand_drv.c 166 ---------------\n ------\n  nand_drv.c 192 --nand disk size: 0x780000\n\n partition [D] plug in..\n\n partition [Z] plug in..\n Mount Parts Thread work now.....\n\n partition [E] plug in..\n Mount Parts Thread work end....\n $$$$ eink clock is 8 $$$$$\n eink_GetFileCntFromDir path = v:\\\n eLIBs_opendir failed!\n AWF fp=0\n -------------open awf file failed, try to open backup awf-----------\n AWF file length=545 K\n LCD TCON OPEN\n MSG:L3723(Drv_eink.c): set vcom mode as IO contrl, not pwm\n .....................................................................................................................\n .Please press enter key(keypad or irkey) to continue!\n..............................................................\n .....................................................................................................................\n Esh_StartUp \n ===================yyparse start====================\n yynerrs.1 =  0 \n yynerrs.2 =  0 \n outtree->op_type =  1 \n yynerrs.3 =  0 \n &&&&&&&&&&&&&&&&&&&yyparse end&&&&&&&&&&&&&&&&&&&&&&&&&&&\n Execute startup script begin..............\n ===================yyparse start====================\n yynerrs.1 =  0 \n yynerrs.2 =  0 \n outtree->op_type =  -382909968 \n yynerrs.3 =  0 \n &&&&&&&&&&&&&&&&&&&yyparse end&&&&&&&&&&&&&&&&&&&&&&&&&&&\n ===================yyparse start====================\n yynerrs.1 =  0 \n yynerrs.2 =  0 \n outtree->op_type =  1 \n yynerrs.3 =  0 \n &&&&&&&&&&&&&&&&&&&yyparse end&&&&&&&&&&&&&&&&&&&&&&&&&&&\n Esh Error:  OpenConfigFile y:\\config\\config.bin failed.\n ===================yyparse start====================\n yynerrs.1 =  0 \n yynerrs.2 =  0 \n outtree->op_type =  -382909968 \n yynerrs.3 =  0 \n &&&&&&&&&&&&&&&&&&&yyparse end&&&&&&&&&&&&&&&&&&&&&&&&&&&\n ===================yyparse start====================\n yynerrs.1 =  0 \n yynerrs.2 =  0 \n outtree->op_type =  1 \n yynerrs.3 =  0 \n &&&&&&&&&&&&&&&&&&&yyparse end&&&&&&&&&&&&&&&&&&&&&&&&&&&\n ===================yyparse start====================\n yynerrs.1 =  0 \n yynerrs.2 =  0 \n outtree->op_t41 set tmpNewCpu = 37yynerrs.3 =  0 \n &&&&&&&&&&&&&&&&&&&yyparse end&&&&&&&&&&&&&&&&&&&&&&&&&&&\n ===================yyparse start====================\n yynerrs.1 =  0 \n yynerrs.2 =  0 \n outtree->op_type =  1 \n yynerrs.3 =  0 \n &&&&&&&&&&&&&&&&&&&yyparse end&&&&&&&&&&&&&&&&&&&&&&&&&&&\n ===================yyparse start====================\n yynerrs.1 =  0 \n yynerrs.2 =  0 \n outtree->op_type =  -382909968 \n yynerrs.3 =  0 \n &&&&&&&&&&&&&&&&&&&yyparse end&&&&&&&&&&&&&&&&&&&&&&&&&&&\n ===================yyparse start====================\n yynerrs.1 =  0 \n yynerrs.2 =  0 \n outtree->op_type =  1 \n yynerrs.3 =  0 \n &&&&&&&&&&&&&&&&&&&yyparse end&&&&&&&&&&&&&&&&&&&&&&&&&&&\n ...............Execute startup script end\n Esh_StartUp finish\n Esh msg:  shell maidesktop_server_init plug tp start\n desktop_server_init plug tp over\n dsk_orchid_createDisk over\n d_createDisk over\n  dsk_orchid_check over\n dsk_voice_set_volume over\n dsk_display_set_lcd_bright over\n dsk_keytone_init over\n dsk_keytone_set_state over\n dsk_app_reg_init over\n dsk_langres_set_type over\n 214 Date parameter is invalid!(Y2020, M5, D28)\n 214 Date parameter is invalid!(Y2020, M5, D28)\n 214 Date parameter is invalid!(Y2020, M5, D28)\n\n eink_GetFileCntFromDir path = v:\\\n eLIBs_opendir failed!\n AWF fp=0\n -------------open awf file failed, try to open backup awf-----------\n AWF file length=545 K\n LCD TCON OPEN\n MSG:L3723(Drv_eink.c): set vcom mode as IO contrl, not pwm\n LCD TCON close\n B þ           `     €ÿ\n</code></pre>\nEDIT: Sorry I forgot to say that this ereader indeed runs on an allwinner E200 chip. So most likely it's the allwinner os (probably 2.0, but that's not sure).\n",
    "votes": "1",
    "answers": 1,
    "views": "219",
    "tags": [
        "firmware",
        "linux",
        "firmware-analysis"
    ],
    "user": "Wobbelaar",
    "time": "May 28, 2020 at 12:18",
    "comments": [],
    "answers_data": [
        {
            "content": "The boot log seems similar to the one from this page, so there's a high possibility this device is using an AllWinner SoC. You can try the tools from the linked repository.\nAnother option could be to dump the flash and analyze it.\n",
            "votes": "1",
            "user": "Igor Skochinsky",
            "time": "May 28, 2020 at 11:57",
            "is_accepted": false,
            "comments": []
        }
    ]
}