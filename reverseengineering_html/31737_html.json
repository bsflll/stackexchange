{
    "title": "Decoding a time format",
    "link": "https://reverseengineering.stackexchange.com/questions/31737/decoding-a-time-format",
    "content": "<html><body><div class=\"s-prose js-post-body\" itemprop=\"text\">\n <p>\n  I'm reverse engineering a hardware device which stores time a strange format:\n </p>\n <div class=\"s-table-container\">\n  <table class=\"s-table\">\n   <thead>\n    <tr>\n     <th>\n      32-bit word\n     </th>\n     <th>\n      H:MM:SS (rounded)\n     </th>\n    </tr>\n   </thead>\n   <tbody>\n    <tr>\n     <td>\n      0x03200000\n     </td>\n     <td>\n      0:00:00\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x09700000\n     </td>\n     <td>\n      0:00:00\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x0A1B0000\n     </td>\n     <td>\n      0:00:01\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x0A160000\n     </td>\n     <td>\n      0:00:01\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x0B098000\n     </td>\n     <td>\n      0:00:02\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x0F376600\n     </td>\n     <td>\n      0:00:46\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x0F347800\n     </td>\n     <td>\n      0:00:46\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x10038B00\n     </td>\n     <td>\n      0:01:07\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x10040800\n     </td>\n     <td>\n      0:01:07\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x1056A600\n     </td>\n     <td>\n      0:01:49\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x10573C00\n     </td>\n     <td>\n      0:01:50\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x10589A00\n     </td>\n     <td>\n      0:01:50\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x1058B300\n     </td>\n     <td>\n      0:01:50\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x13173240\n     </td>\n     <td>\n      0:10:19\n     </td>\n    </tr>\n    <tr>\n     <td>\n      0x13173880\n     </td>\n     <td>\n      0:10:19\n     </td>\n    </tr>\n   </tbody>\n  </table>\n </div>\n <p>\n  I believe the time is recorded in some internal high-frequency timer ticks, but I don't see any linear correspondence between the words and time values. Any tips?\n </p>\n <p>\n  UPD. I found out that it's Texas Instruments's custom floating-point format for TMS320 DSPs. Described\n  <a href=\"http://www.ti.com/lit/pdf/spra400\" rel=\"nofollow noreferrer\">\n   here\n  </a>\n  .\n </p>\n</div>\n</body></html>",
    "votes": "5",
    "answers": 1,
    "views": "92",
    "tags": [
        "binary-format"
    ],
    "user": "Canis Lupus",
    "time": "Apr 2, 2023 at 20:26",
    "comments": [],
    "answers_data": [
        {
            "content": "<html><body><div class=\"s-prose js-post-body\" itemprop=\"text\">\n <p>\n  The values appear to be a floating point format similar to\n  <a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow noreferrer\">\n   single-precision floating-point format\n  </a>\n  .\n </p>\n <p>\n  If I interpret the first byte as an unbiased exponent and interpret the other bytes (excluding the highest bit) as a fraction, then the value\n  <kbd>\n   (1 +\n   <em>\n    fraction\n   </em>\n   ) × 2\n   <sup>\n    <em>\n     exponent\n    </em>\n   </sup>\n  </kbd>\n  appears to be the number of milliseconds:\n </p>\n <p>\n  <a href=\"https://i.sstatic.net/RadyM.png\" rel=\"nofollow noreferrer\">\n   <img alt=\"table showing how the bits are assigned to exponent and fraction values\" src=\"https://i.sstatic.net/RadyM.png\"/>\n  </a>\n </p>\n <p>\n  Equivalently, in the following textual table, the first byte\n  <em>\n   <strong>\n    e\n   </strong>\n  </em>\n  is the exponent, the other bytes\n  <em>\n   <strong>\n    n\n   </strong>\n  </em>\n  form the numerator of the fraction, and the denominator of the fraction is 2\n  <sup>\n   23\n  </sup>\n  . The value\n  <kbd>\n   (1 +\n   <em>\n    n\n   </em>\n   /2\n   <sup>\n    23\n   </sup>\n   ) × 2\n   <sup>\n    <em>\n     e\n    </em>\n   </sup>\n  </kbd>\n  is the number of milliseconds:\n </p>\n <div class=\"s-table-container\">\n  <table class=\"s-table\">\n   <thead>\n    <tr>\n     <th style=\"text-align: right;\">\n      <em>\n       e\n      </em>\n     </th>\n     <th style=\"text-align: right;\">\n      <em>\n       n\n      </em>\n     </th>\n     <th style=\"text-align: right;\">\n      <em>\n       e\n      </em>\n     </th>\n     <th style=\"text-align: right;\">\n      <em>\n       n\n      </em>\n     </th>\n     <th style=\"text-align: right;\">\n      (1 +\n      <em>\n       n\n      </em>\n      /2\n      <sup>\n       23\n      </sup>\n      ) × 2\n      <sup>\n       <em>\n        e\n       </em>\n      </sup>\n     </th>\n    </tr>\n   </thead>\n   <tbody>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       03\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       200000\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      3\n     </td>\n     <td style=\"text-align: right;\">\n      2097152\n     </td>\n     <td style=\"text-align: right;\">\n      10\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       09\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       700000\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      9\n     </td>\n     <td style=\"text-align: right;\">\n      7340032\n     </td>\n     <td style=\"text-align: right;\">\n      960\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       0A\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       1B0000\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      10\n     </td>\n     <td style=\"text-align: right;\">\n      1769472\n     </td>\n     <td style=\"text-align: right;\">\n      1240\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       0A\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       160000\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      10\n     </td>\n     <td style=\"text-align: right;\">\n      1441792\n     </td>\n     <td style=\"text-align: right;\">\n      1200\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       0B\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       098000\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      11\n     </td>\n     <td style=\"text-align: right;\">\n      622592\n     </td>\n     <td style=\"text-align: right;\">\n      2200\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       0F\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       376600\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      15\n     </td>\n     <td style=\"text-align: right;\">\n      3630592\n     </td>\n     <td style=\"text-align: right;\">\n      46950\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       0F\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       347800\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      15\n     </td>\n     <td style=\"text-align: right;\">\n      3438592\n     </td>\n     <td style=\"text-align: right;\">\n      46200\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       10\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       038B00\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      16\n     </td>\n     <td style=\"text-align: right;\">\n      232192\n     </td>\n     <td style=\"text-align: right;\">\n      67350\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       10\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       040800\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      16\n     </td>\n     <td style=\"text-align: right;\">\n      264192\n     </td>\n     <td style=\"text-align: right;\">\n      67600\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       10\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       56A600\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      16\n     </td>\n     <td style=\"text-align: right;\">\n      5678592\n     </td>\n     <td style=\"text-align: right;\">\n      109900\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       10\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       573C00\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      16\n     </td>\n     <td style=\"text-align: right;\">\n      5716992\n     </td>\n     <td style=\"text-align: right;\">\n      110200\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       10\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       589A00\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      16\n     </td>\n     <td style=\"text-align: right;\">\n      5806592\n     </td>\n     <td style=\"text-align: right;\">\n      110900\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       10\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       58B300\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      16\n     </td>\n     <td style=\"text-align: right;\">\n      5812992\n     </td>\n     <td style=\"text-align: right;\">\n      110950\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       13\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       173240\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      19\n     </td>\n     <td style=\"text-align: right;\">\n      1520192\n     </td>\n     <td style=\"text-align: right;\">\n      619300\n     </td>\n    </tr>\n    <tr>\n     <td style=\"text-align: right;\">\n      <code>\n       13\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      <code>\n       173880\n      </code>\n     </td>\n     <td style=\"text-align: right;\">\n      19\n     </td>\n     <td style=\"text-align: right;\">\n      1521792\n     </td>\n     <td style=\"text-align: right;\">\n      619400\n     </td>\n    </tr>\n   </tbody>\n  </table>\n </div>\n</div>\n</body></html>",
            "votes": "4",
            "user": "Bavi_H",
            "time": "Apr 2, 2023 at 10:02",
            "is_accepted": true,
            "comments": []
        }
    ]
}