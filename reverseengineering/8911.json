{
    "title": "Why int 21h/ ah=0Ah doesn't work in emu86 [closed]",
    "link": "https://reverseengineering.stackexchange.com/questions/8911/why-int-21h-ah-0ah-doesnt-work-in-emu86",
    "content": "<div class=\"s-prose js-post-body\" itemprop=\"text\">\n<div>\n<aside class=\"s-notice s-notice__info post-notice js-post-notice mb16\" role=\"status\">\n<div class=\"d-flex fd-column fw-nowrap\">\n<div class=\"d-flex fw-nowrap\">\n<div class=\"flex--item wmn0 fl1 lh-lg\">\n<div class=\"flex--item fl1 lh-lg\">\n<div>\n<b>Closed.</b> This question is <a href=\"/help/closed-questions\">off-topic</a>. It is not currently accepting answers.\n                                \n                            </div>\n</div>\n</div>\n</div>\n</div>\n<hr class=\"my12 outline-none baw0 bb bc-blue-400\"/>\n<div class=\"fw-nowrap fc-black-500\">\n<div class=\"d-flex fd-column lh-md\">\n<div class=\"mb0 d-flex\">\n<div class=\"flex--item mr8\">\n<svg aria-hidden=\"true\" class=\"svg-icon iconLightbulb\" height=\"18\" viewbox=\"0 0 18 18\" width=\"18\"><path d=\"M15 6.38A6.5 6.5 0 0 0 7.78.04h-.02A6.5 6.5 0 0 0 2.05 5.6a6.3 6.3 0 0 0 2.39 5.75c.49.39.76.93.76 1.5v.24c0 1.07.89 1.9 1.92 1.9h2.75c1.04 0 1.92-.83 1.92-1.9v-.2c0-.6.26-1.15.7-1.48A6.3 6.3 0 0 0 15 6.37M4.03 5.85A4.5 4.5 0 0 1 8 2.02a4.5 4.5 0 0 1 5 4.36 4.3 4.3 0 0 1-1.72 3.44c-.98.74-1.5 1.9-1.5 3.08v.1H7.2v-.14c0-1.23-.6-2.34-1.53-3.07a4.3 4.3 0 0 1-1.64-3.94M10 18a1 1 0 0 0 0-2H7a1 1 0 1 0 0 2z\"></path></svg>\n</div>\n<p> Questions on <b>software development</b> are off-topic here, but can be asked on <a href=\"http://stackoverflow.com/about\">Stack Overflow</a>.</p>\n</div>\n<div class=\"mb0 mt6 d-flex\">\n<p class=\"ml24 pl2\">Closed <span class=\"relativetime\" title=\"2015-05-19 14:21:38Z\">9 years ago</span>.</p>\n</div>\n<div class=\"ml24 pl2\">\n</div>\n</div>\n</div>\n<div class=\"mt24 d-flex gsx gs8\">\n<a class=\"s-btn s-btn__outlined flex--item js-post-notice-edit-post\" href=\"/posts/8911/edit\">\n                        Improve this question\n                    </a>\n</div>\n</aside>\n</div>\n<p>I've written a simple code to get a student information like name and ID, but in the code when I want to get input the interrupt doesn't work I mean int 21h/ah=0Ah\nIt pauses when the interrupt is reached but just accepts Enter from keyboard not any number or characters, here my code :</p>\n<pre><code>stack segment \n\n    dw 128 dup (?)\n\nstack ends\n\ndata segment \n\n\n    name0 db 30,?,30 dup('$')\n    id0 db 10,?,10 dup('$') \n\n    menu db \"1-Enter student name:\",0Dh,0Ah\n    db \"2-Enter student ID:\",0Dh,0Ah\n    db \"3-Printing the student name and ID:\",0Dh,0Ah,\n    db \"4-Exit\",0Dh,0Ah\n    db \"Please Select :\",'$'\n\n\n\n    selection db 1,?,4\n\n    show0 db \"(s)he is \",'$'\n    show1 db \" his/her ID \",'$'\n\n   ; address1 db 2 dup(?)\n   ; address2 db 2 dup(?)\n\n\n\ndata ends    \n\n\ncode segment\nstart:\n; set segment registers:\n    mov ax, data\n    mov ds, ax\n    ;mov ax, data1\n    mov es, ax\n\n    push bp\n    mov bp,sp              \n\n    xor cx,cx\n\nloop1:\n    ;cx is reserved\n\n    push offset menu\n    call print\n\n    lea dx,selection   \n    mov ah,0Ah\n    int 21h         ; &lt;----- doesn't work \n\n    lea bx,selection\n    mov cl,[bx+2]\n\n    cmp cl,1\n    je getname_scope\n\n    cmp cl,2\n    je getid_scope\n\n    cmp cl,3\n    je showinfo\n\n\nret0:           \n\n    cmp cl,4\n    jne loop1\n    jmp exit\n\n            getname_scope:\n\n                mov bx, offset name0\n                push bx\n                call Get\n\n            jmp ret0\n\n            getid_scope:\n\n                lea bx,id0\n                push bx\n                call Get    \n\n            jmp ret0   \n\n            showinfo:\n\n                push offset show0\n                call print\n\n                push offset name0+2\n                call print\n\n                push offset show1\n                call print \n\n                push offset id0+2\n                call print\n\n\n\n            jmp ret0\n\nexit:   \n\n    ; wait for any key....    \n    mov ah, 1\n    int 21h\n\n    pop bp\n\n    mov ax, 4c00h ; exit to operating system.\n    int 21h    \n\ncode ends\n\n\nproc Get near\n\n    push bp\n    mov bp,sp\n\n    lea dx,[bp+4]\n    mov ah,0Ah\n    int 21h\n\n\n    pop bp\n    ret\n\nGet endp\n\n\n\nproc print near\n\n    push bp\n    mov bp,sp\n\n    mov dx,[bp+4]\n    mov ah, 9\n    int 21h\n\n    pop bp\n  ret     \n\nend start ; set entry point and stop the assembler.\n</code></pre>\n<p>what's wrong with the code ? how to </p>\n</div>",
    "votes": "0",
    "answers": 1,
    "views": "978",
    "tags": [
        "assembly"
    ],
    "user": "user314532",
    "time": "9 years ago",
    "comments": [],
    "answers_data": [
        {
            "content": "<div class=\"s-prose js-post-body\" itemprop=\"text\">\n<p>The problem is in your declaration of \"selection\".  Your buffer is only one character large, which is enough space for only the Enter key.  To accept more characters, you have to increase the size of the buffer.</p>\n</div>",
            "votes": "1",
            "user": "peter ferrie",
            "time": "May 16, 2015 at 22:05",
            "is_accepted": false,
            "comments": []
        }
    ]
}