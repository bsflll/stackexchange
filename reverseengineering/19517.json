{
    "title": "Need help identifying main processor for Roland synthesizer",
    "link": "https://reverseengineering.stackexchange.com/questions/19517/need-help-identifying-main-processor-for-roland-synthesizer",
    "content": "<div class=\"s-prose js-post-body\" itemprop=\"text\">\n<p>I desperately need help figuring out the ic chips in this unit so I can view the firmware in ida pro. </p>\n<p>So the unit is a roland gr-55 guitar synthesizer and i'm trying to disassemble the firmware into assembly language, but I have no info on the processor type. I have tried to analyze the firmware, which is a binary file using binwalk but wasn't able to find any info. I've also used the tool cpu_rec to see if it would give me any info and it told me it's a pic10 but I don't thinks that's accurate. I'll post pics below of the gr-55 motherboard, and the firmware , and some other stuff.</p>\n<p><a href=\"https://i.sstatic.net/21XAj.jpg\" rel=\"nofollow noreferrer\">R05011845 WSP</a> IC</p>\n<p><a href=\"https://i.sstatic.net/SSmKJ.jpg\" rel=\"nofollow noreferrer\">R8A02021ABG</a>  IC</p>\n<p><a href=\"https://i.sstatic.net/98xW7.jpg\" rel=\"nofollow noreferrer\">MXIC mx29lv640ebti-70g</a> IC</p>\n<p><a href=\"https://i.sstatic.net/pjjOD.jpg\" rel=\"nofollow noreferrer\">ESMT m12l128168a-azl1p10jy</a> IC</p>\n<p><a href=\"https://www.roland.com/us/support/by_product/gr-55/updates_drivers/f64a41ce-c897-4fd5-94d7-71ec8ff6f036/\" rel=\"nofollow noreferrer\">gr-55 firmware link</a> here's the roland gr-55's firmware</p>\n<p><a href=\"https://www.joness.com/gr300/service/GR-55_SERVICE_NOTES.pdf\" rel=\"nofollow noreferrer\">gr-55 schematics</a> here's the roland gr-55 schematics</p>\n<p>I think the R8A02021ABG could be the main cpu due to these forms <a href=\"http://forum.pianoworld.com/ubbthreads.php/topics/2385759/roland-bk-9-internals.html\" rel=\"nofollow noreferrer\">(similar sythesizer internals)</a>. This person seems to have some of the same ic numbers, and hes saying the R8A02021ABG is the main processor, and that it's a sh3/sh4 7700 series processor. When I go to the link for his units OS website \n<a href=\"https://www.toppers.jp/fi4-kernel.html\" rel=\"nofollow noreferrer\">OS website for bk9</a> it tells me that the processor for that OS is a sh3 (sh 7727). It seems that ida pro does not have an option for a (sh 7727). I read another form from someone who said they also have a (sh 7727) in their unit, this website wont let me post any more links so if you type mpc500 os code in google and click link for mpc-forms.com, it's on the second page second comment down. This person says they don't make a disassembler for the (sh 7727) and reverse engineering it would be impossible     </p>\n<p>My main goal is to be able to change some things in the roland gr-55's firmware, like changing some of the names to make things easier to understand so I can make music in peace. Is what i'm trying to do even possible or am I just giving myself a headache for no reason. Sorry if the post is confusing, and for the excessive links. If anybody can give me any info I would appreciate it.  </p>\n</div>",
    "votes": "5",
    "answers": 1,
    "views": "1k",
    "tags": [
        "ida",
        "disassembly",
        "assembly",
        "decompilation",
        "firmware"
    ],
    "user": "Dukes Mayonnaise",
    "time": "Oct 3, 2018 at 17:32",
    "comments": [
        {
            "user": "Igor Skochinsky",
            "text": "<span class=\"comment-copy\">schematics link goes to your local drive :)</span>",
            "time": null
        },
        {
            "user": "julian",
            "text": "<span class=\"comment-copy\">The the firmware download EULA forbids reverse engineering, decompilation and disassembly.</span>",
            "time": null
        }
    ],
    "answers_data": [
        {
            "content": "<div class=\"s-prose js-post-body\" itemprop=\"text\">\n<p>The firmware is compressed, so it is no wonder that up to this point attempting to determine the target CPU of the firmware has been so troublesome.</p>\n<p><a href=\"https://i.sstatic.net/wpHyV.png\" rel=\"noreferrer\"><img alt=\"compressed firmware image\" src=\"https://i.sstatic.net/wpHyV.png\"/></a></p>\n<p>A signature scan reveals a signature associated with LHA compression:</p>\n<pre><code>$ binwalk gr55.bin \n\nDECIMAL       HEXADECIMAL     DESCRIPTION\n--------------------------------------------------------------------------------\n4             0x4             LHa (2.x) archive data [lh5] [NSRL|LHA2]\n</code></pre>\n<p><a href=\"http://manpages.ubuntu.com/manpages/trusty/man1/lhasa.1.html\" rel=\"noreferrer\">lhasa</a> can be used to decompress the file, which produces a file called <code>appli.bin</code>. A signature scan of this file produces the following results:</p>\n<pre><code>$ binwalk appli.bin \n\nDECIMAL       HEXADECIMAL     DESCRIPTION\n--------------------------------------------------------------------------------\n2229080       0x220358        Ubiquiti partition header, header size: 56 bytes, name: \"PARTITION#\", base address: 0x00040000, data size: 524288 bytes\n3513280       0x359BC0        Copyright string: \"Copyright\"\n3527064       0x35D198        Broadcom 96345 firmware header, header size: 256, board id: \"   1/8\", ~CRC32 header checksum: 0x43452043, ~CRC32 data checksum: 0x43452042\n3579113       0x369CE9        VxWorks symbol table, big endian, first entry: [type: uninitialized data, code address: 0xE00, symbol address: 0x13C18800]\n7197404       0x6DD2DC        Copyright string: \"Copyright Kobe Steel Ltd.\"\n7252974       0x6EABEE        Copyright string: \"Copyright 2004 TEPCO UQUEST, LTD.\"\n</code></pre>\n<p>Be aware that some may be false positives. For example, I believe that Broadcom 96345 firmware typically targets MIPS CPUs in routers. Further investigation is required. An entropy scan of <code>appli.bin</code> reveals that it is not compressed or encrypted:</p>\n<p><a href=\"https://i.sstatic.net/EhKPe.png\" rel=\"noreferrer\"><img alt=\"uncompressed\" src=\"https://i.sstatic.net/EhKPe.png\"/></a></p>\n<p>There is quite a bit of string data in this binary, some of it potentially interesting. For example, this bit:</p>\n<pre><code>$Id: k_version.c,v 1.3 2010/09/22 13:10:33 shigeno Exp $\n  SHELL for iTRON ver 1.01\n===========================================================\n  Copyright 2004 TEPCO UQUEST, LTD.\n</code></pre>\n<p><a href=\"https://www.uquest.co.jp/en/\" rel=\"noreferrer\">Tepco Uquest</a> is a Japanese company that develops middleware for embedded devices.</p>\n<p>A search for \"SHELL for iTRON ver 1.01\" results in this:</p>\n<p><a href=\"https://i.sstatic.net/c71KH.png\" rel=\"noreferrer\"><img alt=\"dev presentation\" src=\"https://i.sstatic.net/c71KH.png\"/></a></p>\n<p>There is quite a bit of technical information contained in <a href=\"http://www.t-engine.org/wp-content/themes/wp.vicuna/pdf/specifications/en_US/MW_introduction_e_1.01.pdf\" rel=\"noreferrer\">this document</a>; for example on page 71:</p>\n<p><a href=\"https://i.sstatic.net/7VgeL.png\" rel=\"noreferrer\"><img alt=\"doc page 71\" src=\"https://i.sstatic.net/7VgeL.png\"/></a></p>\n<p>It may contain information relevant to identifying the CPU, as the SH (SuperH) family of CPUs is discussed (<a href=\"https://www.renesas.com/us/en/products/microcontrollers-microprocessors/superh/sh7144/sh7144.html\" rel=\"noreferrer\">Renesas SH7145</a>, SH7727).</p>\n<p>Radare2 supports the SuperH instruction set. </p>\n<p>Other strings include things like this:</p>\n<pre><code>St.Piano 3\nSt.Piano 4\nSt.Piano 5\nBrite Piano\nStage Piano\nHonky Tonk\nLoFi Piano\nPiano 1 w\nEuropean Pf\nPiano 2 w\nHonky-tonk\nHonky-tonk w\nPop Piano 1\nPop Piano 2\nPop Piano 3\nPiano 3 w\nStage EP 1\nStage EP 2\nStage EP Trm\nTremolo EP 1\nE.Piano 1\n</code></pre>\n<p>Perhaps there is no need for reverse engineering, just patching strings.</p>\n</div>",
            "votes": "5",
            "user": "julian",
            "time": "Oct 4, 2018 at 4:26",
            "is_accepted": true,
            "comments": []
        }
    ]
}